Improve build process. First of all, organize the code by directories.
Then change the build process to support the new structure.
